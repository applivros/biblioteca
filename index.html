<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Minha Biblioteca Premium</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>

  <div class="app-container hidden" id="mainApp"> <!-- Adicionado 'hidden' e id 'mainApp' -->
    <div class="app">

      <!-- HEADER -->
      <header class="app-header">
        <div class="app-title">
          <i class="fas fa-book"></i> Minha Biblioteca
        </div>
        <!-- Os botões de ação do cabeçalho serão movidos para a barra inferior em mobile -->
        <div class="header-actions desktop-only">
          <!-- Botões adicionados para desktop -->
          <button id="btnMetaDesktop" class="btn-icon" onclick="abrirMeta()">
            <i class="fas fa-bullseye"></i>
          </button>
          <button id="btnAddBookDesktop" class="btn-icon" onclick="abrirFormulario()">
            <i class="fas fa-plus"></i>
          </button>
          <button id="btnToggleTheme" class="btn-icon" onclick="toggleTheme()">
            <i class="fas fa-moon"></i>
          </button>
          <button id="btnLogoutDesktop" class="btn-icon" onclick="logout()"> <!-- Botão de Logout -->
            <i class="fas fa-sign-out-alt"></i>
          </button>
        </div>
      </header>

      <!-- TABS (Visível apenas em desktop) -->
      <div class="tabs-container desktop-only">
        <div class="tabs">
          <button id="tabTodos" class="tab-btn active" onclick="filtrar('Todos')">
            Todos <span class="badge" id="badgeTodos">0</span>
          </button>
          <button id="tabQueroLer" class="tab-btn" onclick="filtrar('Quero ler')">
            Quero Ler <span class="badge" id="badgeQueroLer">0</span>
          </button>
          <button id="tabLendo" class="tab-btn" onclick="filtrar('Lendo')">
            Lendo <span class="badge" id="badgeLendo">0</span>
          </button>
          <button id="tabLido" class="tab-btn" onclick="filtrar('Lido')">
            Lido <span class="badge" id="badgeLido">0</span>
          </button>
        </div>
      </div>

      <!-- META -->
      <section id="metaSection" class="form-section hidden">
        <h2 class="form-title"><i class="fas fa-bullseye"></i> Meta Anual</h2>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Ano</label>
            <input type="number" id="metaAno" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Total de livros</label>
            <input type="number" id="metaTotalInput" class="form-input">
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-primary" onclick="salvarMeta()">Salvar Meta</button>
          <button class="btn btn-secondary" onclick="metaSection.classList.add('hidden')">Cancelar</button>
        </div>
      </section>

      <!-- FORMULÁRIO -->
      <section id="formulario" class="form-section hidden">
        <h2 class="form-title" id="formTitulo"><i class="fas fa-plus"></i> Adicionar Livro</h2>
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Título</label>
            <input type="text" id="titulo" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Autor</label>
            <input type="text" id="autor" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Ano</label>
            <input type="number" id="ano" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Páginas</label>
            <input type="number" id="paginas" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Páginas Lidas</label>
            <input type="number" id="paginasLidas" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Capa (URL)</label>
            <input type="text" id="capa" class="form-input">
          </div>
          <div class="form-group">
            <label class="form-label">Status</label>
            <select id="status" class="form-input">
              <option>Quero ler</option>
              <option>Lendo</option>
              <option>Lido</option>
            </select>
          </div>
          <div class="form-group">
            <label><input type="checkbox" id="inMeta"> Participa da Meta</label>
            <input type="number" id="metaAnoLivro" class="form-input" placeholder="Ano da meta do livro">
          </div>
          <div class="form-group" style="grid-column: 1 / -1;">
            <label class="form-label">Sinopse</label>
            <textarea id="sinopse" class="form-input" rows="4"></textarea>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-primary" onclick="salvarLivro()">Salvar</button>
          <button class="btn btn-secondary" onclick="fecharFormulario()">Cancelar</button>
        </div>
      </section>

      <!-- META VISUAL -->
      <section class="progress-meta">
        <div class="meta-info">
          <div class="meta-title">Meta de <span id="metaAnoDisplay"></span></div>
          <div class="meta-stats"><span id="metaContador"></span>/<span id="metaTotalDisplay"></span></div>
        </div>
        <div class="progress-bar">
          <div id="metaBar" class="progress-fill"></div>
        </div>
      </section>

      <!-- LISTA DE LIVROS -->
      <main class="app-main">
        <div id="listaLivros" class="books-grid"></div>
      </main>

      <!-- BARRA DE NAVEGAÇÃO INFERIOR (MOBILE/TABLET) - MOVIDA PARA DENTRO DO MAINAPP -->
      <div class="bottom-nav mobile-only">
        <button class="btn-icon" onclick="abrirMeta()">
          <i class="fas fa-bullseye"></i>
        </button>
        <button class="btn-icon btn-add-book" onclick="abrirFormulario()">
          <i class="fas fa-plus"></i>
        </button>
        <div class="filter-menu-container">
          <button class="btn-icon" id="btnFilterMenu" onclick="toggleFilterMenu()">
            <i class="fas fa-filter"></i>
          </button>
          <div id="filterMenu" class="filter-menu hidden">
            <button class="filter-menu-item" onclick="filtrar('Todos'); toggleFilterMenu()">Todos</button>
            <button class="filter-menu-item" onclick="filtrar('Quero ler'); toggleFilterMenu()">Quero Ler</button>
            <button class="filter-menu-item" onclick="filtrar('Lendo'); toggleFilterMenu()">Lendo</button>
            <button class="filter-menu-item" onclick="filtrar('Lido'); toggleFilterMenu()">Lido</button>
          </div>
        </div>
        <button class="btn-icon" onclick="logout()"> <!-- Botão de Logout Mobile -->
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>

    </div>
  </div>

  <!-- MODAL -->
  <div id="modal" class="modal" onclick="if(event.target==this)fecharModal()">
    <div class="modal-content">
      <button class="modal-close" onclick="fecharModal()">&times;</button>
      <h2 class="modal-title" id="modalTitulo"></h2>
      <div class="modal-details">
        <div class="modal-detail"><span class="modal-label">Autor:</span> <span class="modal-value" id="modalAutor"></span></div>
        <div class="modal-detail"><span class="modal-label">Ano:</span> <span class="modal-value" id="modalAno"></span></div>
        <div class="modal-detail"><span class="modal-label">Páginas:</span> <span class="modal-value" id="modalPaginas"></span></div>
        <div class="modal-detail"><span class="modal-label">Lidas:</span> <span class="modal-value" id="modalPaginasLidas"></span></div>
        <div class="modal-detail"><span class="modal-label">Status:</span> <span class="modal-value" id="modalStatus"></span></div>
        <div class="modal-detail"><span class="modal-label">Meta Ano:</span> <span class="modal-value" id="modalMeta"></span></div>
      </div>
      <div class="modal-sinopse" id="modalSinopse"></div>
  <button id="btnLerMais" class="btn btn-secondary" onclick="lerMaisSinopse()">Ver mais</button>
      <div class="modal-actions">
        <button class="btn btn-primary" onclick="editarLivroModal()">Editar</button>
        <button class="btn btn-secondary" onclick="deletarLivroModal()">Deletar</button>
      </div>
    </div>
  </div>

  <!-- Tela de Login -->
  <section id="loginSection" class="form-section">
    <h2 class="form-title"><i class="fas fa-user-circle"></i> Login / Registro</h2>
    <div class="form-grid">
      <div class="form-group">
        <label class="form-label">Email</label>
        <input type="email" id="loginEmail" class="form-input">
      </div>
      <div class="form-group">
        <label class="form-label">Senha</label>
        <input type="password" id="loginPassword" class="form-input">
      </div>
    </div>
    <div class="form-actions">
      <button class="btn btn-primary" onclick="handleLogin()">Login</button>
      <button class="btn btn-secondary" onclick="handleRegister()">Registrar</button>
    </div>
    <p id="loginMessage" style="color: red; text-align: center; margin-top: 10px;"></p>
  </section>

  <script src="app.js" type="module"></script> <!-- Adicionado type="module" -->
</body>
</html>

